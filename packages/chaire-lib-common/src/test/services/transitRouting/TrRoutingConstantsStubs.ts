/*
 * Copyright 2022, Polytechnique Montreal and contributors
 *
 * This file is licensed under the MIT License.
 * License text available at https://opensource.org/licenses/MIT
 */
import { TrRoutingPath, TrRoutingV2 } from '../../../api/TrRouting';
import { TrRoutingRoute } from '../../../services/transitRouting/types';
import TestUtils from '../../TestUtils';

// TODO These constant paths seem to have as base an actual reply from trRouting
// with local data and randomly adapted. The data does not make sense. No
// calculations should be made on them at all! We should add stub data that
// actually makes sense for a fictive agency.

export const pathNoTransferRouteV2: TrRoutingV2.SingleRouteResult = {
    departureTime: 28324,
    arrivalTime: 29858,
    totalTravelTime: 1534,
    totalDistance: 2686,
    totalInVehicleTime: 391,
    totalInVehicleDistance: 1426,
    totalNonTransitTravelTime: 963,
    totalNonTransitDistance: 1260,
    numberOfBoardings: 1,
    numberOfTransfers: 0,
    transferWalkingTime: 0,
    transferWalkingDistance: 0,
    accessTravelTime: 210,
    accessDistance: 262,
    egressTravelTime: 753,
    egressDistance: 998,
    transferWaitingTime: 0,
    firstWaitingTime: 180,
    totalWaitingTime: 180,
    steps: [
        {
            type: 'access',
            action: 'walking',
            travelTime: 210,
            distance: 262,
            departureTime: 28324,
            arrivalTime: 28534,
            readyToBoardAt: 28714
        },
        {
            action: 'boarding',
            departureTime: 28714,
            waitingTime: 180,
            agencyAcronym: 'STM',
            agencyName: 'Société de transport de Montréal',
            agencyUuid: '4b193a41-adc0-400b-aa9b-390d9aea6226',
            lineLongname: 'Amherst',
            lineShortname: '14',
            lineUuid: '2e93cc6a-9f35-4b78-ad60-de5166013747',
            pathUuid: 'ba9be399-9c87-4707-91cd-e71c720814d2',
            modeName: 'Bus',
            mode: 'bus',
            tripUuid: 'dda23fbd-d300-4b0f-be00-826e7b1306e7',
            legSequenceInTrip: 2,
            stopSequenceInTrip: 2,
            nodeCode: '52800',
            nodeCoordinates: [-73.560609, 45.519149],
            nodeName: 'Amherst / Robin',
            nodeUuid: '05d9dd74-9d39-46b8-b7f4-257551d66ed4'
        },
        {
            action: 'unboarding',
            arrivalTime: 29105,
            inVehicleTime: 391,
            inVehicleDistance: 1426,
            agencyAcronym: 'STM',
            agencyName: 'Société de transport de Montréal',
            agencyUuid: '4b193a41-adc0-400b-aa9b-390d9aea6226',
            lineLongname: 'Amherst',
            lineShortname: '14',
            lineUuid: '2e93cc6a-9f35-4b78-ad60-de5166013747',
            pathUuid: 'ba9be399-9c87-4707-91cd-e71c720814d2',
            modeName: 'Bus',
            mode: 'bus',
            tripUuid: 'dda23fbd-d300-4b0f-be00-826e7b1306e7',
            legSequenceInTrip: 5,
            stopSequenceInTrip: 5,
            nodeCode: '52356',
            nodeCoordinates: [-73.573864, 45.526659],
            nodeName: 'De La Roche / Bureau',
            nodeUuid: 'b7c419fb-5a2a-4980-8e08-6889609f2a0f'
        },
        {
            type: 'egress',
            action: 'walking',
            travelTime: 753,
            distance: 998,
            departureTime: 29105,
            arrivalTime: 29858
        }
    ]
};

export const pathNoTransferRouteResult: TrRoutingRoute = {
    originDestination: [
        TestUtils.makePoint([-73.56084442138672, 45.51738357543945]),
        TestUtils.makePoint([-73.5704345703125, 45.5335807800293])
    ],
    timeOfTrip: 28200,
    timeOfTripType: 'departure' as const,
    ...pathNoTransferRouteV2
};

/**
 * Default return value for a trRouting request. This json string was generated
 * from an actual return value from an arbitrary routing request in a running
 * Transition.
 */
export const pathNoTransfer: TrRoutingPath = {
    accessDistanceMeters: 262,
    accessTravelTimeMinutes: 4,
    accessTravelTimeSeconds: 210,
    arrivalTime: '8:17',
    arrivalTimeSeconds: 29858,
    departureTime: '7:52',
    departureTimeSeconds: 28324,
    destination: [-73.5704345703125, 45.5335807800293],
    egressDistanceMeters: 998,
    egressTravelTimeMinutes: 13,
    egressTravelTimeSeconds: 753,
    firstWaitingTimeMinutes: 3,
    firstWaitingTimeSeconds: 180,
    initialDepartureTime: '7:50',
    initialDepartureTimeSeconds: 28200,
    initialLostTimeAtDepartureMinutes: 2,
    initialLostTimeAtDepartureSeconds: 124,
    numberOfBoardings: 1,
    numberOfTransfers: 0,
    optimizeCases: '',
    origin: [-73.56084442138672, 45.51738357543945],
    status: 'success',
    steps: [
        {
            action: 'walking',
            arrivalTime: '7:55',
            arrivalTimeSeconds: 28534,
            departureTime: '7:52',
            departureTimeSeconds: 28324,
            distanceMeters: 262,
            readyToBoardAt: '7:58',
            readyToBoardAtSeconds: 28714,
            travelTimeMinutes: 4,
            travelTimeSeconds: 210,
            type: 'access'
        },
        {
            action: 'board',
            agencyAcronym: 'STM',
            agencyName: 'Société de transport de Montréal',
            agencyUuid: '4b193a41-adc0-400b-aa9b-390d9aea6226',
            departureTime: '7:58',
            departureTimeSeconds: 28714,
            legSequenceInTrip: 2,
            lineLongname: 'Amherst',
            lineShortname: '14',
            lineUuid: '2e93cc6a-9f35-4b78-ad60-de5166013747',
            mode: 'bus',
            modeName: 'Bus',
            nodeCode: '52800',
            nodeCoordinates: [-73.560609, 45.519149],
            nodeName: 'Amherst / Robin',
            nodeUuid: '05d9dd74-9d39-46b8-b7f4-257551d66ed4',
            pathUuid: 'ba9be399-9c87-4707-91cd-e71c720814d2',
            stopSequenceInTrip: 2,
            tripUuid: 'dda23fbd-d300-4b0f-be00-826e7b1306e7',
            waitingTimeMinutes: 3,
            waitingTimeSeconds: 180
        },
        {
            action: 'unboard',
            agencyAcronym: 'STM',
            agencyName: 'Société de transport de Montréal',
            agencyUuid: '4b193a41-adc0-400b-aa9b-390d9aea6226',
            arrivalTime: '8:05',
            arrivalTimeSeconds: 29105,
            inVehicleDistanceMeters: 1426,
            inVehicleTimeMinutes: 7,
            inVehicleTimeSeconds: 391,
            legSequenceInTrip: 5,
            lineLongname: 'Amherst',
            lineShortname: '14',
            lineUuid: '2e93cc6a-9f35-4b78-ad60-de5166013747',
            mode: 'bus',
            modeName: 'Bus',
            nodeCode: '52356',
            nodeCoordinates: [-73.573864, 45.526659],
            nodeName: 'De La Roche / Bureau',
            nodeUuid: 'b7c419fb-5a2a-4980-8e08-6889609f2a0f',
            pathUuid: 'ba9be399-9c87-4707-91cd-e71c720814d2',
            stopSequenceInTrip: 5,
            tripUuid: 'dda23fbd-d300-4b0f-be00-826e7b1306e7'
        },
        {
            action: 'walking',
            arrivalTime: '8:17',
            arrivalTimeSeconds: 29858,
            departureTime: '8:05',
            departureTimeSeconds: 29105,
            distanceMeters: 998,
            travelTimeMinutes: 13,
            travelTimeSeconds: 753,
            type: 'egress'
        }
    ],
    totalDistanceMeters: 2686,
    totalInVehicleDistanceMeters: 1426,
    totalInVehicleTimeMinutes: 7,
    totalInVehicleTimeSeconds: 391,
    totalNonTransitDistanceMeters: 1260,
    totalNonTransitTravelTimeMinutes: 16,
    totalNonTransitTravelTimeSeconds: 963,
    totalTravelTimeMinutes: 26,
    totalTravelTimeSeconds: 1534,
    totalWaitingTimeMinutes: 3,
    totalWaitingTimeSeconds: 180,
    transferWaitingTimeMinutes: 0,
    transferWaitingTimeSeconds: 0,
    transferWalkingDistanceMeters: 0,
    transferWalkingTimeMinutes: 0,
    transferWalkingTimeSeconds: 0
};

export const pathOneTransferV2: TrRoutingV2.SingleRouteResult = {
    departureTime: 900,
    arrivalTime: 36063,
    totalTravelTime: 1534,
    totalDistance: 3686,
    totalInVehicleTime: 1320,
    totalInVehicleDistance: 2126,
    totalNonTransitTravelTime: 963,
    totalNonTransitDistance: 1260,
    numberOfBoardings: 1,
    numberOfTransfers: 1,
    transferWalkingTime: 0,
    transferWalkingDistance: 0,
    accessTravelTime: 960,
    accessDistance: 555,
    egressTravelTime: 876,
    egressDistance: 800,
    transferWaitingTime: 300,
    firstWaitingTime: 888,
    totalWaitingTime: 1800,
    steps: [
        {
            type: 'access',
            action: 'walking',
            travelTime: 210,
            distance: 262,
            departureTime: 28324,
            arrivalTime: 28534,
            readyToBoardAt: 28714
        },
        {
            action: 'boarding',
            departureTime: 28714,
            waitingTime: 180,
            agencyAcronym: 'STM',
            agencyName: 'Société de transport de Montréal',
            agencyUuid: '4b193a41-adc0-400b-aa9b-390d9aea6226',
            lineLongname: 'Amherst',
            lineShortname: '14',
            lineUuid: '2e93cc6a-9f35-4b78-ad60-de5166013747',
            pathUuid: 'ba9be399-9c87-4707-91cd-e71c720814d2',
            modeName: 'Bus',
            mode: 'bus',
            tripUuid: 'ba9be399-9c87-4707-91cd-e71c720814d2',
            legSequenceInTrip: 2,
            stopSequenceInTrip: 2,
            nodeCode: '52800',
            nodeCoordinates: [-73.560609, 45.519149],
            nodeName: 'Amherst / Robin',
            nodeUuid: '05d9dd74-9d39-46b8-b7f4-257551d66ed4'
        },
        {
            action: 'unboarding',
            arrivalTime: 29105,
            inVehicleTime: 391,
            inVehicleDistance: 1426,
            agencyAcronym: 'STM',
            agencyName: 'Société de transport de Montréal',
            agencyUuid: '4b193a41-adc0-400b-aa9b-390d9aea6226',
            lineLongname: 'Amherst',
            lineShortname: '14',
            lineUuid: '2e93cc6a-9f35-4b78-ad60-de5166013747',
            pathUuid: 'ba9be399-9c87-4707-91cd-e71c720814d2',
            modeName: 'Bus',
            mode: 'bus',
            tripUuid: 'ba9be399-9c87-4707-91cd-e71c720814d2',
            legSequenceInTrip: 15,
            stopSequenceInTrip: 16,
            nodeCode: '52356',
            nodeCoordinates: [-73.573864, 45.526659],
            nodeName: 'De La Roche / Bureau',
            nodeUuid: 'b7c419fb-5a2a-4980-8e08-6889609f2a0f'
        },
        {
            type: 'transfer',
            action: 'walking',
            travelTime: 753,
            distance: 998,
            departureTime: 29105,
            arrivalTime: 29858,
            readyToBoardAt: 30038
        },
        {
            action: 'boarding',
            departureTime: 30900,
            waitingTime: 180,
            agencyAcronym: 'STM',
            agencyName: 'Société de transport de Montréal',
            agencyUuid: '4b1941-adc0-400b-aa9b-390d9aea6226',
            lineLongname: 'Sherbrooke direction OUEST',
            lineShortname: '24',
            lineUuid: '2493cc6a-4b78-ad60-de5166013747',
            pathUuid: 'bg2be399-9c87-4707-91cd-e71c720814d2',
            modeName: 'Bus',
            mode: 'bus',
            tripUuid: 'ddag2fbd-d300-4b0f-be00-826e7b1306e7',
            legSequenceInTrip: 8,
            stopSequenceInTrip: 8,
            nodeCode: '52636',
            nodeCoordinates: [-73.990609, 45.999149],
            nodeName: 'Sherbrooke / Cherrier',
            nodeUuid: '05d9dg24-9d39-46b8-b7f4-257551d66ed4'
        },
        {
            action: 'unboarding',
            arrivalTime: 31291,
            inVehicleTime: 391,
            inVehicleDistance: 1426,
            agencyAcronym: 'STM',
            agencyName: 'Société de transport de Montréal',
            agencyUuid: '4b1941-adc0-400b-aa9b-390d9aea6226',
            lineLongname: 'Sherbrooke direction OUEST',
            lineShortname: '24',
            lineUuid: '2493cc6a-4b78-ad60-de5166013747',
            pathUuid: 'bg2be399-9c87-4707-91cd-e71c720814d2',
            modeName: 'Bus',
            mode: 'bus',
            tripUuid: 'ddag2fbd-d300-4b0f-be00-826e7b1306e7',
            legSequenceInTrip: 15,
            stopSequenceInTrip: 16,
            nodeCode: '5236',
            nodeCoordinates: [-73.993864, 45.996659],
            nodeName: 'Sherbrooke / Metcalfe',
            nodeUuid: 'b7c41g2b-5a2a-4980-8e08-6889609f2a0f'
        },
        {
            type: 'egress',
            action: 'walking',
            travelTime: 753,
            distance: 998,
            departureTime: 31291,
            arrivalTime: 32044
        }
    ]
};

export const pathOneTransferRouteResult: TrRoutingRoute = {
    originDestination: [
        TestUtils.makePoint([-73.56084442138672, 45.51738357543945]),
        TestUtils.makePoint([-74.5708345703125, 44.5332307800293])
    ],
    timeOfTrip: 1890,
    timeOfTripType: 'departure' as const,
    ...pathOneTransferV2
};

export const pathOneTransfer: TrRoutingPath = {
    accessDistanceMeters: 555,
    accessTravelTimeMinutes: 42,
    accessTravelTimeSeconds: 960,
    arrivalTime: '12:36',
    arrivalTimeSeconds: 36063,
    departureTime: '06:00',
    departureTimeSeconds: 900,
    destination: [-74.5708345703125, 44.5332307800293],
    egressDistanceMeters: 800,
    egressTravelTimeMinutes: 5,
    egressTravelTimeSeconds: 876,
    firstWaitingTimeMinutes: 1,
    firstWaitingTimeSeconds: 888,
    initialDepartureTime: '03:50',
    initialDepartureTimeSeconds: 1890,
    initialLostTimeAtDepartureMinutes: 2,
    initialLostTimeAtDepartureSeconds: 124,
    numberOfBoardings: 1,
    numberOfTransfers: 0,
    optimizeCases: '',
    origin: [-73.56084442138672, 45.51738357543945],
    status: 'success',
    steps: [
        {
            action: 'walking',
            arrivalTime: '07:56',
            arrivalTimeSeconds: 28534,
            departureTime: '07:52',
            departureTimeSeconds: 28324,
            distanceMeters: 262,
            readyToBoardAt: '07:59',
            readyToBoardAtSeconds: 28714,
            travelTimeMinutes: 4,
            travelTimeSeconds: 210,
            type: 'access'
        },
        {
            action: 'board',
            agencyAcronym: 'STM',
            agencyName: 'Société de transport de Montréal',
            agencyUuid: '4b1941-adc0-400b-aa9b-390d9aea6226',
            departureTime: '07:59',
            departureTimeSeconds: 28714,
            legSequenceInTrip: 8,
            lineLongname: 'Amherst',
            lineShortname: '14',
            lineUuid: '2e93cc6a-4b78-ad60-de5166013747',
            mode: 'bus',
            modeName: 'Bus',
            nodeCode: '52800',
            nodeCoordinates: [-73.560609, 45.519149],
            nodeName: 'Amherst / Robin',
            nodeUuid: '05d9dd74-9d39-46b8-b7f4-257551d66ed4',
            pathUuid: 'ba9be399-9c87-4707-91cd-e71c720814d2',
            stopSequenceInTrip: 8,
            tripUuid: 'dda23fbd-d300-4b0f-be00-826e7b1306e7',
            waitingTimeMinutes: 3,
            waitingTimeSeconds: 180
        },
        {
            action: 'unboard',
            agencyAcronym: 'STM',
            agencyName: 'Société de transport de Montréal',
            agencyUuid: '4b1aa9b-390d9aea6226',
            arrivalTime: '08:05',
            arrivalTimeSeconds: 29105,
            inVehicleDistanceMeters: 1426,
            inVehicleTimeMinutes: 7,
            inVehicleTimeSeconds: 391,
            legSequenceInTrip: 15,
            lineLongname: 'Amherst',
            lineShortname: '14',
            lineUuid: '2e93cc6a-9f35-4b78-ad60-de5166013747',
            mode: 'bus',
            modeName: 'Bus',
            nodeCode: '52356',
            nodeCoordinates: [-73.573864, 45.526659],
            nodeName: 'De La Roche / Bureau',
            nodeUuid: 'b7c419fb-5a2a-4980-8e08-6889609f2a0f',
            pathUuid: 'ba9be399-9c87-4707-91cd-e71c720814d2',
            stopSequenceInTrip: 16,
            tripUuid: 'dda23fbd-d300-4b0f-be00-826e7b1306e7'
        },
        {
            action: 'walking',
            arrivalTime: '08:18',
            arrivalTimeSeconds: 29858,
            departureTime: '08:05',
            departureTimeSeconds: 29105,
            distanceMeters: 998,
            travelTimeMinutes: 13,
            travelTimeSeconds: 753,
            type: 'transfer'
        },
        {
            action: 'board',
            agencyAcronym: 'STM',
            agencyName: 'Société de transport de Montréal',
            agencyUuid: '4b1941-adc0-400b-aa9b-390d9aea6226',
            departureTime: '08:35',
            departureTimeSeconds: 30900,
            legSequenceInTrip: 8,
            lineLongname: 'Sherbrooke direction OUEST',
            lineShortname: '24',
            lineUuid: '2493cc6a-4b78-ad60-de5166013747',
            mode: 'bus',
            modeName: 'Bus',
            nodeCode: '52636',
            nodeCoordinates: [-73.990609, 45.999149],
            nodeName: 'Sherbrooke / Cherrier',
            nodeUuid: '05d9dg24-9d39-46b8-b7f4-257551d66ed4',
            pathUuid: 'bg2be399-9c87-4707-91cd-e71c720814d2',
            stopSequenceInTrip: 8,
            tripUuid: 'ddag2fbd-d300-4b0f-be00-826e7b1306e7',
            waitingTimeMinutes: 3,
            waitingTimeSeconds: 180
        },
        {
            action: 'unboard',
            agencyAcronym: 'STM',
            agencyName: 'Société de transport de Montréal',
            agencyUuid: '4b1ag2b-390d9aea6226',
            arrivalTime: '08:41',
            arrivalTimeSeconds: 31291,
            inVehicleDistanceMeters: 1426,
            inVehicleTimeMinutes: 15,
            inVehicleTimeSeconds: 391,
            legSequenceInTrip: 15,
            lineLongname: 'Sherbrooke direction OUEST',
            lineShortname: '24',
            lineUuid: '2493cc6a-4b78-ad60-de5166013747',
            mode: 'bus',
            modeName: 'Bus',
            nodeCode: '5236',
            nodeCoordinates: [-73.993864, 45.996659],
            nodeName: 'Sherbrooke / Metcalfe',
            nodeUuid: 'b7c41g2b-5a2a-4980-8e08-6889609f2a0f',
            pathUuid: 'ba9beg29-9c87-4707-91cd-e71c720814d2',
            stopSequenceInTrip: 16,
            tripUuid: 'ddag2fbd-d300-4b0f-be00-826e7b1306e7'
        },
        {
            action: 'walking',
            arrivalTime: '09:40',
            arrivalTimeSeconds: 32044,
            departureTime: '09:00',
            departureTimeSeconds: 31291,
            distanceMeters: 998,
            travelTimeMinutes: 13,
            travelTimeSeconds: 753,
            type: 'egress'
        }
    ],
    totalDistanceMeters: 3686,
    totalInVehicleDistanceMeters: 2126,
    totalInVehicleTimeMinutes: 22,
    totalInVehicleTimeSeconds: 1320,
    totalNonTransitDistanceMeters: 1260,
    totalNonTransitTravelTimeMinutes: 16,
    totalNonTransitTravelTimeSeconds: 963,
    totalTravelTimeMinutes: 30,
    totalTravelTimeSeconds: 1534,
    totalWaitingTimeMinutes: 3,
    totalWaitingTimeSeconds: 1800,
    transferWaitingTimeMinutes: 5,
    transferWaitingTimeSeconds: 300,
    transferWalkingDistanceMeters: 0,
    transferWalkingTimeMinutes: 0,
    transferWalkingTimeSeconds: 0
};
